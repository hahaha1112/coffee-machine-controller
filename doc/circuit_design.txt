咖啡机控制系统电路设计
========================

1. DS18B20温度传感器连接
------------------------

DS18B20是一种单总线数字温度传感器，接线方式如下：

微控制器引脚    DS18B20引脚
--------------------------
PORTB.0         DQ (数据线)
VCC (3.3V/5V)   VDD (电源)
GND             GND (地)

注意：DQ线需要接一个4.7K上拉电阻到VCC。

2. 按键模块连接
--------------

按键模块采用矩阵键盘设计，接线如下：

微控制器引脚    按键矩阵
--------------------------
PORTC.0         行1
PORTC.1         行2
PORTC.2         行3
PORTC.3         行4
PORTC.4         列1
PORTC.5         列2
PORTC.6         列3
PORTC.7         列4

注意：每个按键引脚需要加入10K下拉电阻。

3. 显示模块连接
--------------

显示模块采用1602LCD显示屏，接线如下：

微控制器引脚    LCD1602引脚
--------------------------
PORTA.0         RS
PORTA.1         RW
PORTA.2         E
PORTA.4-7       D4-D7 (4位模式)
VCC (5V)        VDD
GND             VSS
POT (10K)       VO (对比度调节)

4. 执行器控制
------------

执行器控制通过继电器或MOS管驱动，接线如下：

微控制器引脚    执行器
--------------------------
PORTD.0         加热器控制 (通过继电器)
PORTD.1         研磨器控制 (通过继电器)
PORTD.2         水泵控制 (通过继电器)
PORTD.3         水阀控制 (通过继电器)

注意：
1. 所有继电器驱动电路都需要加入保护二极管
2. 继电器驱动可使用ULN2003等达林顿管阵列
3. 如使用MOS管驱动，需要选择适当的MOS管并加入合适的栅极驱动电路

5. 电源部分
----------

系统电源需求：
- 微控制器供电：5V DC
- 继电器供电：5V DC (控制侧)
- 加热器供电：220V AC (负载侧)
- 水泵、研磨器供电：12V DC (负载侧)

电源模块建议使用稳压电源模块，并加入足够的滤波电容。

6. 系统连接框图
--------------

```
+-------------+         +----------------+
|  DS18B20    |-------->|                |
+-------------+         |                |
                        |                |
+-------------+         |                |
|  按键矩阵   |-------->|                |
+-------------+         |                |
                        |                |
+-------------+         |    单片机      |
|  LCD显示屏  |<--------|                |
+-------------+         |   主控制器     |
                        |                |
+-------------+         |                |
|  继电器模块  |<--------|                |
+-------------+         |                |
     |                  |                |
     v                  +----------------+
+-------------+
|  执行部件   |
| (加热器等)  |
+-------------+
```

7. 注意事项
----------

1. 高压部分（如加热器控制）必须与低压控制电路严格隔离
2. 系统应设计过温保护、漏电保护等安全措施
3. DS18B20温度传感器应放置在适当位置，确保能准确测量水温
4. 所有信号线应考虑抗干扰措施，必要时加入滤波电路
5. 建议在PCB设计时考虑EMI/EMC问题，合理布局和地线设计 